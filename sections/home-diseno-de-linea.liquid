<section id="diseno-de-linea">
  <div class="twcss-relative twcss-hidden lg:twcss-flex twcss-items-center twcss-justify-center twcss-w-full twcss-py-24 lg:twcss-py-32">
    <div class="twcss-w-10/12 twcss-max-w-[1120px] twcss-mx-auto">
      <div class="twcss-grid twcss-grid-cols-2 twcss-relative">
        <div class="twcss-flex twcss-flex-col twcss-items-start twcss-justify-end twcss-relative">
          {% assign products = collections['all'].products | sort: 'created_at' %}
          {% for product in products %}
          {% assign images = product.images %}
          {% if images.size > 0 %}
            <figure id="{{ product.id }}" class="twcss-absolute twcss-top-0 twcss-left-0 twcss-bottom-0 twcss-w-[350px] twcss-transition-opacity twcss-duration-300 twcss-opacity-0 twcss-pointer-events-none">
              <img src="{{ images[0] | image_url: width: 360, height: 560 }}" width="100%" height="100%" alt="{{ product.title }}" class="twcss-object-cover twcss-object-center twcss-w-full twcss-h-full twcss-inset-0">
            </figure>
          {% endif %}
          {% endfor %}
          <a href="/collections/tarareo" class="twcss-flex twcss-items-center twcss-space-x-2 twcss-bg-[#FFE500] twcss-text-black twcss-rounded-l-full twcss-rounded-r-full twcss-text-4xl twcss-font-bebasneue twcss-uppercase twcss-px-8 twcss-relative twcss-z-[1] twcss-translate-y-1/2 -twcss-translate-x-1/4">
            <span class="twcss-block twcss-pt-3 twcss-pb-2 twcss-whitespace-nowrap">Ir a la tienda</span>
            <svg width="31" height="24" viewBox="0 0 31 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M18.29 0.751953L17.1258 2.06897L27.3661 11.1211L0.5 11.1211L0.5 12.8789L27.3661 12.8789L17.1258 21.931L18.29 23.248L30.5 12.4547V11.5452L18.29 0.751953Z" fill="black"/>
            </svg>
          </a>
        </div>
        <div class="">
          <nav class="twcss-flex twcss-flex-col twcss-items-end twcss-font-bebasneue twcss-uppercase twcss-text-[36px] lg:twcss-text-[64px] twcss-leading-none">
            {% assign products = collections['all'].products | sort: 'created_at' %}
            {% for product in products -%}
              <a href="{{ product.url }}" data-image="{{ product.id }}" class="diseno-linea">
                <span class="twcss-cursor-pointer twcss-transition-all twcss-duration-150">{{ product.title }}</span>
              </a>
            {%- endfor %}
          </nav>
        </div>
      </div>
    </div>
  </div>
  <div class="twcss-relative twcss-flex twcss-items-center twcss-justify-center twcss-py-24 lg:twcss-hidden">
    <figure class="twcss-relative twcss-aspect-[0.7/1] twcss-w-[75%] twcss-mx-auto twcss-pointer-events-none">
    {% assign products = collections['all'].products | sort: 'created_at' %}
    {% for product in products -%}
        <div id="{{ product.id }}" class="slide-producto twcss-absolute twcss-top-0 twcss-left-0 twcss-right-0 twcss-bottom-0 twcss-w-full twcss-h-full twcss-duration-300 twcss-transition-opacity twcss-opacity-0">
          {% assign images = product.images %}
          {% if images.size > 0 %}
          {{ images[0] | image_url: width: 612 | image_tag: class: "twcss-block twcss-absolute twcss-top-0 twcss-right-0 twcss-bottom-0 twcss-right-0 twcss-w-full twcss-h-full" }}
          {% endif %}
        </div>
      {% endfor %}
    </figure>
    <div class="swiper swiper-producto !twcss-absolute twcss-inset-0 twcss-w-full twcss-h-full twcss-z-[5]">
      <div class="swiper-wrapper">
        {% assign products = collections['all'].products | sort: 'created_at' %}
        {% for product in products -%}
        <div class="swiper-slide !twcss-flex twcss-items-center twcss-justify-center twcss-cursor-grab active:twcss-cursor-grabbing" data-img="{{ product.id }}">
          <a href="{{ product.url }}" class="twcss-block twcss-text-6xl twcss-font-bebasneue twcss-text-black twcss-px-5 twcss-pt-3 twcss-pb-2 twcss-backdrop-blur">
            {{ product.title }}
          </a>
        </div>
        {% endfor %}
      </div>
    </div>
    <a href="/collections/tarareo" class="twcss-absolute twcss-flex twcss-items-center twcss-space-x-2 twcss-bg-[#FFE500] twcss-text-black twcss-rounded-l-full twcss-rounded-r-full twcss-text-4xl twcss-font-bebasneue twcss-uppercase twcss-px-8 twcss-z-1 twcss-translate-y-1/2 -twcss-translate-x-1/2 twcss-left-1/2 twcss-bottom-24 twcss-z-10">
      <span class="twcss-block twcss-pt-3 twcss-pb-2 twcss-whitespace-nowrap">Ir a la tienda</span>
      <svg width="31" height="24" viewBox="0 0 31 24" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M18.29 0.751953L17.1258 2.06897L27.3661 11.1211L0.5 11.1211L0.5 12.8789L27.3661 12.8789L17.1258 21.931L18.29 23.248L30.5 12.4547V11.5452L18.29 0.751953Z" fill="black"/>
      </svg>
    </a>
  </div>
</section>
{% schema %}
  {
    "name": "Diseño de Línea",
    "disabled_on": {
      "groups": ["header", "footer"]
    }
  }
{% endschema %}
{% style %}
  .diseno-linea span { color: #000000; text-shadow: 0px 0px 0px rgba(0,0,0,0) }
  .diseno-linea span.active,
  .diseno-linea:hover span { color: #FFE500; text-shadow: 2px 2px 0px #000000 }
{% endstyle %}
{% javascript %}
  (function () {
    document.addEventListener('DOMContentLoaded', function() {
      let activeSpan = null;
      let activeFigure = null;
      document.querySelectorAll('.diseno-linea').forEach((link, index) => {
        const span = link.querySelector('span');
        const figure = document.getElementById(link.dataset.image);
        console.log(span, figure);
        if (index === 0) {
          span.classList.add('active');
          figure.classList.remove('twcss-opacity-0');
          figure.classList.add('twcss-opacity-100');
          activeSpan = span;
          activeFigure = figure;
        }
        span.addEventListener('mouseover', () => {
          if (activeFigure && activeFigure !== figure) {
            activeFigure.classList.remove('twcss-opacity-100');
            activeFigure.classList.add('twcss-opacity-0');
          }
          figure.classList.remove('twcss-opacity-0');
          figure.classList.add('twcss-opacity-100');
          if (activeSpan && activeSpan !== span) {
            activeSpan.classList.remove('active');
          }
          span.classList.add('active');
          activeFigure = figure;
          activeSpan = span;
        });
      });
  
      const imagesProyectos = document.querySelectorAll(".slide-producto");
      const swiperProyectos = new Swiper(".swiper-producto", {
        slidesPerView: "auto",
        centeredSlides: true,
        loop: true,
        on: {
          init: function () {
            imagesProyectos[0].classList.add("twcss-opacity-100");
            imagesProyectos[0].classList.remove("twcss-opacity-0");
          },
          realIndexChange: function () {
            let index = this.realIndex; // Adjusted index to match the zero-based indexing
            imagesProyectos.forEach((image, i) => {
              if (i === index) {
                image.classList.add("twcss-opacity-100");
                image.classList.remove("twcss-opacity-0");
              } else {
                image.classList.remove("twcss-opacity-100");
                image.classList.add("twcss-opacity-0");
              }
            });
          },
        }
      });
    });
  })();
  {% endjavascript %}